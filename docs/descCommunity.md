#### Описание проекта.

Проект предназначен для размещения пользователями сообщений в децентрализованной системе.
Создание и удаление данных коррелировано с изменением баланса токенов PAGE и NFT токенов PAGE на кошельках пользователей
Пользователи могут объединяться в сообщества. Сообщество - группа пользователей, объединенная какими-либо общими интересами.

Сначала создаются Сообщества. Каждое сообщество может создавать свои посты и комментарии к постам.
Создание поста автоматически влечет создание NFT токена. У каждого поста и комментария есть адрес кошелька пользователя - создателя
и адрес кошелька пользователя - владельца. NFT токены (посты) можно передавать от одного пользователя к другому.
Но передача NFT кому-либо просто так не возможна. Она возможна при условии, что пользователь - получатель NFT токена 
перед приемом токена дал approve() на эту операцию.

Вместе с комментариями к постам идут upvotes, downvotes.  upvotes, downvotes не существуют без комментариев.
Для одного комментария может быть только что-то одно: либо upvotes, либо downvotes.

Члены Сообществ выбирают и сами назначают себе модераторов.
Только модератор может удалить комментарии, созданные в Сообществе.
Процедура назначения модератора или его удаления осуществляется через процедуру голосования членов этого сообщества с помощью контракта VOTE.
При голосовании учитывается количество токенов PAGE, находящихся на кошельке этого пользователя и на балансе его аккаунта в контракте BANK.
Эти значения суммируются и дают вес голосу. Таким образом токены PAGE это еще и токены управления.

Пост может удалить только владелец этого поста.
Комментарий может удалить модератор сообщества.

У постов и комментариев есть свойство видимости. По-умолчанию оно включено.
Но модератор сообщества может управлять этим свойством.

Сообщества могут быть активными и неактивными. Комментарии и посты у неактивных сообществ нельзя читать, удалять и создавать новые.
Активность сообщества можно изменить только путем голосования членов этого сообщества.

Создание поста влечет к минту нового NFT токена и минту токенов PAGE. 
Количество токенов PAGE эквивалентно по стоимости количеству эфира затраченного на газ для этой операции.
Текущая стоимость токена берется с пула PAGE/WETH, созданного на Uniswap v3.
Создание комментария также вызывает минт токенов PAGE для компансации затрат на газ. Но NFT в этом случае не минтится.   
Для удаление поста или комментария надо затратить некоторое количество токенов PAGE.
При этих операциях распределение токенов PAGE касается 3-х кошельков: Treasury Wallet, owner и creator.
На эти кошельки токены распределяются не равномерно, а в процентном соотношении.
Величину этих процентов могут менять члены сообществ путем процедуры голосования через контракт VOTE.
При создании нового сообщества автоматически присваиваются значения по умолчанию. 

При деплое контрактов производится первоначальная эмиссия 50,000,000 токенов Page на Treasury Wallet.

## Основное workflow

#### Создание NFT токена (поста).
Значения по умолчанию
10% => to Treasury Wallet.
45% => to owner.
45% => to creator.

#### Создание комментария к посту.
Значения по умолчанию
10% => to Treasury Wallet.
45% => to owner
45% => to creator

#### Сжигание NFT-токена.
Значения по умолчанию
10% => to Treasury Wall
90% => from creator (идет списание)

#### Удаление комментария.
Значения по умолчанию
10% => to Treasury Wall
90% => from creator (идет списание)



#### По контракту BANK.
В контракте Bank есть переменная для хранения балансов пользователей в токенах Page
Все заработанные токены Page фиксируются в этой переменной.
При удалении поста или коммента токены Page списываются с баланса этой переменной.
Если средств не хватает для удаления, то пользователь пополняет эту переменную токенами Page.


Существует фонд Treasure. В него производятся отчисления в размере 10% с каждого поста или комментария.
Величина % отчисления для фонда Treasure может корректироваться владельцем контракта BANK.


#### Основные контракты.

CryptoPageToken - ERC-20 имплементация для токена PAGE
CryptoPageNFT - ERC-721 имплементация для токена NFT.PAGE
CryptoPageCommunity - контракт для управления сообществами
CryptoPageBank - контракт для проведения компенсаций за газ в токенах PAGE  
CryptoPageVoteForFeeAndModerator - голосование за модератора сообщества и за изменение процентов по умолчанию при работе с постами и комментариями.

#### Полезные ссылки

https://info-180.gitbook.io/white-paper-v0.2/
https://crypto.page/white_paper.html


#### Порядок деплоя
1. deploy PageUserRateToken (токен ERC-1155)
    initialize(string site_url)
    
2. deploy PageCalcUserRate (калькулятор рэйтинга пользователей)
    initialize(address _admin, address _userRateToken)
    
3. deploy PageBank (банк для пользователей)
    initialize(address _treasury, address _admin, address _userRateToken)
    setWETHPagePool
    pageCalcUserRate.grantRole для этого банка
    
4. deploy PageToken (токен ERC-20)
    initialize(address _treasury, address _bank)
    pageBank.setToken для этого токена

5. deploy pageSafeDeal
    initialize(address _admin, address _calcUserRate, address _bank)
    setToken для PageToken
    
6. deploy PageNFT (токен ERC-721)
    initialize(address _bank, string _baseURL)
    
7. deploy PageCommunity (основной контракт для всех сообществ пользователей)
    initialize(address _nft, address _bank, address _admin)
    pageNFT.setCommunity установка адреса комьюнити для токена с шага 6
    pageBank.grantRole(MINTER_ROLE) - адрес этого контракта
    pageBank.grantRole(BURNER_ROLE) - адрес этого контракта
    
8. deploy PageVoteForFeeAndModerator
   initialize(address _admin, address _token, address _community, address _bank)
   pageBank.grantRole(UPDATER_FEE_ROLE) - адрес этого контракта
   pageCommunity.addVoterContract - адрес этого контракта

9. deploy pageVoteForEarn
   initialize(address _admin, address _token, address _community, address _bank)
   pageBank.grantRole(VOTE_FOR_EARN_ROLE) - адрес этого контракта
   pageCommunity.addVoterContract - адрес этого контракта

10. deploy PageVoteForSuperModerator
   initialize(address _admin, address _token, address _community, address _bank)
   pageCommunity.addVoterContract - адрес этого контракта
   
=======================================================================================================

Необходимо сделать:
1. Добавить раздел в доку по безопасным сделкам
2. Сделать получение прайса токена через TWAP
